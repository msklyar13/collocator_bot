import dict_functions
import dict_fill

# —ñ–º–ø–æ—Ä—Ç—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É telebot –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–æ–º —Ç–∞ –ø—ñ–¥'—î–¥–Ω—É—î–º–æ—Å—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞ –∑–∞ —Ç–æ–∫–µ–Ω–æ–º
import telebot
from telebot import types
bot = telebot.TeleBot(
    'TOKEN', parse_mode='html')


# –∑–∞–¥–∞—î–º–æ –∫–æ–º–∞–Ω–¥—É "/start" —ñ–∑ –ø–µ—Ä—à–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º-–ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º –±–æ—Ç–∞ —Ç–∞ –¥–≤–æ–º–∞ –∫–Ω–æ–ø–∫–∞–º–∏-–æ–ø—Ü—ñ—è–º–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –¥—ñ–π –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
@bot.message_handler(commands=['start'])
def start(message):
    m = f'''–ü—Ä–∏–≤—ñ—Ç, {message.from_user.first_name}!

–Ø –±–æ—Ç, —â–æ —É–≤—ñ–±—Ä–∞–≤ —É —Å–µ–±–µ —Ü—ñ–ª—É –∫–æ–ª–µ–∫—Ü—ñ—é —Å–ª–æ–≤–æ—Å–ø–æ–ª—É—á–µ–Ω—å. –ù–∞—Ä–∞–∑—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –ª–∏—à–µ —ñ–º–µ–Ω–Ω–∏–∫–æ–≤–æ-–ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–æ–≤—ñ –ø–∞—Ä–∏, –∞–ª–µ –¥–∞–ª—ñ –±—É–¥–µ ;)
–¢–∏ –º–æ–∂–µ—à —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—å –º–æ—ó–º–∏ –∑–Ω–∞–Ω–Ω—è–º–∏ –¥–ª—è –ø—ñ–¥–±–æ—Ä—É –ø—Ä–∏–¥–∞—Ç–Ω–æ–≥–æ –µ–ø—ñ—Ç–µ—Ç–∞, –∞ –º–æ–∂–µ—à —ñ —Å–∞–º(–∞) –Ω–∞–≤—á–∏—Ç–∏ –º–µ–Ω–µ –Ω–æ–≤–∏–º —Å–ª–æ–≤–æ—Å–ø–æ–ª—É—á–µ–Ω–Ω—è–º, –¥–æ–¥–∞–≤—à–∏ –Ω–æ–≤–∏–π —Ç–µ–∫—Å—Ç –¥–æ –º–æ–≥–æ –∫–æ—Ä–ø—É—Å—É.
                     
–©–æ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏?'''
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn1 = types.KeyboardButton('–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –µ–ø—ñ—Ç–µ—Ç üß©')
    btn2 = types.KeyboardButton('–î–æ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç üìù')
    markup.add(btn1, btn2)
    bot.send_message(message.chat.id, m, reply_markup=markup)


# –≤–∏–∑–Ω–∞—á–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–µ–∞–∫—Ü—ñ—ó –Ω–∞ –¥–≤—ñ –∫–Ω–æ–ø–∫–∏ –∑ –ø–µ—Ä—à–æ–≥–æ –±–ª–æ–∫—É —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –±–ª–æ–∫–∏-—Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –æ–±—Ä–æ–±–ª—é–≤–∞—Ç–∏–º—É—Ç—å –ø–æ–¥–∞–ª—å—à–∏–π –∑–∞–ø–∏—Ç
@bot.message_handler(content_types=['text'])
def get_text(message):
    if message.text == '–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –µ–ø—ñ—Ç–µ—Ç üß©':
        bot.send_message(
            message.chat.id, '–ü—Ä–∏–π—à–ª–∏ –º–µ–Ω—ñ —ñ–º–µ–Ω–Ω–∏–∫, –¥–æ —è–∫–æ–≥–æ —à—É–∫–∞—î—à –µ–ø—ñ—Ç–µ—Ç–∏.')
        bot.register_next_step_handler(message, process_epithet)
    elif message.text == '–î–æ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç üìù':
        bot.send_message(
            message.chat.id, '–ü—Ä–∏–π—à–ª–∏ –º–µ–Ω—ñ —Å–≤—ñ–π —Ç–µ–∫—Å—Ç. –Ø –æ–ø—Ä–∞—Ü—é—é –π–æ–≥–æ —Ç–∞ –¥–æ–¥–∞–º —Å–ª–æ–≤–æ—Å–ø–æ–ª—É—á–µ–Ω–Ω—è –¥–æ –∫–æ—Ä–ø—É—Å—É.')
        bot.register_next_step_handler(message, process_text_addition)
    else:
        bot.send_message(
            message.chat.id, '–ù–∞—Ç–∏—Å–Ω–∏ –æ–¥–Ω—É –∑ –∫–Ω–æ–ø–æ–∫ –≤ –º–µ–Ω—é, —â–æ–± –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é.')


# –±–ª–æ–∫ –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –≥—ñ–ª—Ü—ñ "–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –µ–ø—ñ—Ç–µ—Ç"
def process_epithet(message):
    respond_process_epithet(message)

# –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–æ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –≥—ñ–ª—Ü—ñ "–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –µ–ø—ñ—Ç–µ—Ç" –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ñ—É–Ω–∫—Ü—ñ—ó user_adjs_by_noun
def respond_process_epithet(message):
    bot.send_message(message.chat.id, user_adjs_by_noun(message.text.lower()))

# –≤–∏–∑–Ω–∞—á–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –≤–∏–ª—É—á–µ–Ω–Ω—è –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫—ñ–≤ —ñ–∑ –ë–î –∑–∞ –∑–∞–ø–∏—Ç–æ–º-—ñ–º–µ–Ω–Ω–∏–∫–æ–º —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—é exact_noun_adjs —É —Ñ–∞–π–ª—ñ dict_fill
def user_adjs_by_noun(noun):
    if noun in dict_fill.exact_noun_adjs(noun):
        return '\n'.join(dict_fill.exact_noun_adjs(noun)[noun])
    else:
        return '–Ü–º–µ–Ω–Ω–∏–∫–∞ –Ω–µ–º–∞—î –≤ —Å–ª–æ–≤–Ω–∏–∫—É —Å–ª–æ–≤–æ—Å–ø–æ–ª—É—á–µ–Ω—å.'


# –±–ª–æ–∫ –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –≥—ñ–ª—Ü—ñ "–î–æ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç"
def process_text_addition(message):
    respond_process_text_addition(message)

# –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–æ—Ç–∞ –Ω–∞ –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –≥—ñ–ª—Ü—ñ "–î–æ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç" –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ñ—É–Ω–∫—Ü—ñ—ó user_text_to_dict
def respond_process_text_addition(message):
    bot.send_message(message.chat.id, user_text_to_dict(message.text))

# –≤–∏–∑–Ω–∞—á–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –∑–∞–ø–∏—Å—É –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç—É –¥–æ –ë–î —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—é db_fill_update —É —Ñ–∞–π–ª—ñ dict_fill
def user_text_to_dict(text):
    dict_fill.db_fill_update(dict_fill.nlp_text_to_dict(text))
    result = "\n".join([f"{key} ‚Äî {', '.join(value)}" for key,
                       value in dict_fill.nlp_text_to_dict(text).items()])
    return f'''–ë–∞–∑—É –¥–∞–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω–æ. –ó–Ω–∞–π–¥–µ–Ω—ñ —Å–ª–æ–≤–æ—Å–ø–æ–ª—É—á–µ–Ω–Ω—è:\n{result}'''


# –Ω–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –ø–æ—Å—Ç—ñ–π–Ω–∏–π –ø–æ–ª—ñ–Ω–≥ –∑ –Ω—É–ª—å–æ–≤–∏–º —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –Ω–∞ —á–∞—Å –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –ø—Ä–æ–≥—Ä–∞–º–∏
bot.polling(none_stop=True, interval=0)
